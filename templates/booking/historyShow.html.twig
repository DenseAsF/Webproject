{% extends 'adminbase.html.twig' %}

{% block title %}History #{{ booking_history.id }} - Hotel Diongco{% endblock %}

{% block body %}
<div class="max-w-4xl mx-auto mt-10 p-6 bg-white shadow-lg rounded-lg">
    <div class="flex justify-between items-center mb-8 helvetica-condensed">
        <h1 class="text-3xl font-bold">Booking History Details</h1>
        <div class="flex gap-3">
            <a href="{{ path('booking_history') }}" 
               class="bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition">
                Back to History
            </a>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      
        <div class="space-y-6">
            <div class="bg-gray-50 p-6 rounded-lg helvetica-condensed">
                <h2 class="text-xl font-semibold mb-4 text-[rgb(29,53,153)] helvetica-condensed">Booking Information</h2>
                <div class="space-y-3 helvetica-condensed">
                    <div class="flex justify-between border-b pb-2">
                        <span class="font-medium text-gray-600 helvetica-condensed">Original Booking ID:</span>
                        <span class="font-semibold">#{{ booking_history.originalBookingId }}</span>
                    </div>
                    <div class="flex justify-between border-b pb-2 helvetica-condensed">
                        <span class="font-medium text-gray-600">History Record ID:</span>
                        <span class="font-medium">#{{ booking_history.id }}</span>
                    </div>
                    <div class="flex justify-between border-b pb-2 helvetica-condensed">
                        <span class="font-medium text-gray-600">Status:</span>
                        <span class="font-medium text-green-600">{{ booking_history.status }}</span>
                    </div>
                    <div class="flex justify-between border-b pb-2 helvetica-condensed">
                        <span class="font-medium text-gray-600">Check-in Date:</span>
                        <span class="font-medium">{{ booking_history.checkInDate|date('F j, Y') }}</span>
                    </div>
                    <div class="flex justify-between border-b pb-2 helvetica-condensed">
                        <span class="font-medium text-gray-600">Check-out Date:</span>
                        <span class="font-medium">{{ booking_history.checkOutDate|date('F j, Y') }}</span>
                    </div>
                    <div class="flex justify-between border-b pb-2 helvetica-condensed">
                        <span class="font-medium text-gray-600">Total Price:</span>
                        <span class="font-medium text-lg text-[rgb(29,53,153)]">₱{{ booking_history.totalPrice|number_format(2) }}</span>
                    </div>
                </div>
            </div>

            <div class="bg-gray-50 p-6 rounded-lg">
                <h2 class="text-xl font-semibold mb-4 text-[rgb(29,53,153)] helvetica-condensed">Room Information</h2>
                <div class="space-y-3">
                    <div class="flex justify-between border-b pb-2 helvetica-condensed">
                        <span class="font-medium text-gray-600">Room Number:</span>
                        <span class="font-medium">{{ booking_history.roomNumber }}</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="space-y-6">
            <div class="bg-gray-50 p-6 rounded-lg">
                <h2 class="text-xl font-semibold mb-4 text-[rgb(29,53,153)] helvetica-condensed">Customer Information</h2>
                <div class="space-y-3">
                    <div class="flex justify-between border-b pb-2 helvetica-condensed">
                        <span class="font-medium text-gray-600">Name:</span>
                        <span class="font-medium">{{ booking_history.customerName }}</span>
                    </div>
                </div>
            </div>

         <div class="bg-gray-50 p-6 rounded-lg helvetica-condensed">
    <h2 class="text-xl font-semibold mb-4 text-[rgb(29,53,153)] helvetica-condensed">Services</h2>
    {% if booking_history.services is not empty %}
        <div class="space-y-2">
            {% for service in booking_history.services %}
                <div class="flex justify-between border-b pb-2 helvetica-condensed">
                    <span class="font-medium text-gray-600">{{ service.name }}:</span>
                    <span class="font-medium">₱{{ service.price|number_format(2) }}</span>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-gray-500 text-center py-4 helvetica-condensed">No additional services were selected</p>
    {% endif %}
</div>

            <div class="bg-gray-50 p-6 rounded-lg">
                <h2 class="text-xl font-semibold mb-4 text-[rgb(29,53,153)] helvetica-condensed">Actions</h2>
                <div class="flex flex-col gap-3">
                    <form action="{{ path('booking_history_delete', {'id': booking_history.id}) }}" method="post" 
                          onsubmit="return confirm('Are you sure you want to delete this history record?');">
                        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ booking_history.id) }}">
                        <button type="submit" class="w-full bg-red-600 text-white py-2 rounded-md hover:bg-red-700 transition">
                            Delete History Record
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}